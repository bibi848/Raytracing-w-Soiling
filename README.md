# Raytracing With Soiling

A library for analysing the effect of soiling on the effectiveness of a Linear Fresnel Reflector (LFR) plant by Oscar Djuric.

## Summary
This library provides simulations and tools to analyse the effect of the soiling models developed in the HelioSoil [1] repository on the effectiveness of a LFR plant simulated using PySolTrace by NREL [2]. The soiling model is well explained in the HelioSoil repository by following the submodule `HelioSoil @ 5211459` in this repository. 

All scripts contain comments to explain their use, but a brief explanation for each is below.

Folders:
* API Files: Contains the dynamic-link library (.dll) files used to communicate and access the PySolTrace API.
* CSV Files: The data simulated by `Soiled LFR Plant Simulation.py` and `Year-Long Raytracing Simulation.py` is kept in this folder in CSV file form, as well as `Simulation Parameters.csv` which contains the plant parameters.
* `HelioSoil @ 5211459`: This is the submodule of HelioSoil placed in this repository so that the models developed can be accessed by cloning just this repository, without the need of cloning HelioSoil. Later, the method to pull new updates from it is described.
* Helpful Documents: Currently only contains `Aiming Strategy for Linear Fresnel Reflectors.pdf`. This document provides a visual guide for the coordinate system conventions used, as well as explaining where some of the equations come from for the aiming strategy of the heliostats.
* Wodonga Data: This is a case study which uses a very similar structure to the scripts available below. The folder contains a separate README file for a more in depth description.
* __pycache__: Caching of the compiled bytecode, automatically generated by VSCode.
<br><br>
Files:
* `.gitmodules`: Contains the path and url to the HelioSoil git repository.
* `Graphing Simulation Data.py`: Python script which takes the outputs `raytrace_results.csv` and `soiled_data.csv` from the CSV Result Files folder and graphs the results.
* `LFR Plant Example.py`: Python script which can take a date and time to find the position of the sun, and then simulate a 3D raytraced model of the LFR plant.
* `README.md`: The readme file you are currently reading.
* `Soiled LFR Plant Simulation.py`: Python script which initialises the soiling model from HelioSoil while calculating all the tilt angles for the current LFR plant setup. This generates the `soiled_data.csv`.
* `Soiling Test Example.py`: Simpler version of `Soiled LFR Plant Simulation.py` which only finds soiling data on a single instance of heliostat angles. It provides more information on how to interface with the HelioSoil repository.
* `Testing Script.py`: An area for me to try different snippets of code whilst developing the rest of the repository which has access to all the other information. Does not contain anything useful.
* `Year-Long Raytracing Simulation.py`: Python script which takes the precalculated information from `soiled_data.csv` and uses multiprocessing to simulate the raytracing of the LFR plant. It generates `raytrace_results.csv`, which contains information such as the efficiency of the plant.
* `copylot.py` & `solarpilot.dll`: As described in the HelioSoil repository, this is required to interface with some of the APIs used in HelioSoil. However, this is not placed in API Files folder as it would require changing the scripts in HelioSoil.
* `optical_geometrical_setup.py` & `raytracing_soiling_functions.py`: Python scripts containing functions used across the scripts used in the repository.
* `pysoltrace.py`: Python script developed by NREL to interface with the SolTrace API. However, this is not the original file from NREL, as I have made changes so that it works more smoothly with the repository, especially when cloned on a new computer.


<br><br>
## Pulling Updates from HelioSoil
As HelioSoil is only a submodule in this repository, any pulls must be performed in your git terminal. Copy and paste the following in your git terminal:

```
cd HelioSoil
git pull origin main
cd..
git add HelioSoil
git commit -m "Updated HelioSoil submodule"
```
And when you would like to clone this repository, you will need to initialise and update the submodule via:
```
git clone --recurse-submodules https://github.com/bibi848/Raytracing-w-Soiling.git
```

<br><br>
## Main Workflow Structure
To find the efficiency of a specific LFR plant setup outlined in `CSV Files/Simulation Parameters.csv`, first use `Soiled LFR Plant Simulation.py` to generate `soiled_data.csv`. Then use `Year-Long Simulation.py` to perform the raytracing on the data from `soiled_data.csv` and generate `raytrace_results.csv`. Both these data files are then used in `Graphing Simulation Data.py` to demonstrate the results. To find the efficiency of the plant at a single instant, use `LFR Plant Example.py`.

<br><br>
## Citation & Contact
If you would like to use any resources that are present in this repository please cite using
* fill in citation

If you would like to contact me with any professional questions surrounding this repository please email oscar.djuric@gmail.com


<br><br>
## References
[1] G. Picotti, P. Borghesani, G. Manzolini, M. E. Cholette, and R. Wang, “Development and experimental validation of a physical model for the soiling of mirrors for CSP industry applications,” Sol. Energy, vol. 173, pp. 1287–1305, 2018

[2] Wendelin, T. (2003). "SolTRACE: A New Optical Modeling Tool for Concentrating Solar Optics." Proceedings of the ISEC 2003: International Solar Energy Conference, 15-18 March 2003, Kohala Coast, Hawaii. New York: American Society of Mechanical Engineers, pp. 253-260; NREL Report No. CP-550-32866.
